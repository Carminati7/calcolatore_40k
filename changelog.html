<!DOCTYPE html>
<html lang="it">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Diario di bordo — Changelog</title>
  <link rel="stylesheet" href="assets/style-common.css">
  <link rel="stylesheet" href="assets/style-changelog.css">
</head>
<body>
  <header>
    <nav class="main-nav">
      <a href="index.html">Calcolatore</a>
      <a href="docs.html">Documentazione</a>
      <a href="changelog.html" class="active">Diario di bordo</a>
    </nav>
    <h1>Diario di bordo</h1>
    <p class="lede">Registro cronologico delle modifiche e note tecniche — stile diario di bordo.</p>
  </header>
  <main>
  <article class="log article-inner">
      <details open>
        <summary>Version 1 - 8 ore di lavoro - tag v1.0.0</summary>
        <div class="version-entry">
          <h2>### 2025-09-19 — Consolidamento PWA e asset</h2>
          <p>- Aggiornato <code>manifest.webmanifest</code> per usare <code>start_url</code> = <code>/calcolatore_40k/index.html</code> e <code>scope</code> = <code>/calcolatore_40k/</code> (compatibilità GitHub Pages).</p>
          <p>- Risolti i percorsi delle icone del manifest (ora riferimenti assoluti <code>/calcolatore_40k/assets/...</code>).</p>
          <p>- Aggiornato <code>index.html</code> per linkare il manifest con percorso assoluto e registrare il service worker con percorso assoluto <code>/calcolatore_40k/service-worker.js</code>.</p>
      <section>
        <h2>2025-09-19 — Consolidamento PWA e asset</h2>
          <h2>### Storico commit (ultimo snapshot)</h2>
          <pre class="md-block">- b551482 — 2025-09-19 00:54:32 — docs(changelog): add diario di bordo con changelog e note tecniche
   - 629c241 — 2025-09-18 01:28:18 — fix(pwa): use absolute manifest and asset paths; register SW with absolute path for GitHub Pages
   - c4db297 — 2025-09-18 01:23:12 — chore(site): apply manual edits to index.html (restore dynamic swPath)
   - 71aa05e — 2025-09-18 01:19:04 — fix(pwa): register service worker with absolute path matching manifest scope
   - e338cd7 — 2025-09-18 01:15:59 — docs(pwa): add reinstall and troubleshooting guide for manifest/service worker
   - ... (vedi git log per la storia completa)</pre>
        </section>
        <ul>
          <h2>### Prompt &amp; Risposte (sintesi)</h2>
          <pre class="md-block">- Utente: "Voglio costruire un app web utilizzabile da git page..."
    Assistente: scaffolding, PWA basics
  - Utente: richiede responsive
    Assistente: mobile-first, breakpoints
  - Utente: calcolatore (attacchi, BS, forza, AP, danni)
    Assistente: implementato parsing danni e probabilità
  - Utente: reroll
    Assistente: aggiunte checkbox e logica
  - Utente: PWA install path issues
    Assistente: converted manifest & SW to absolute paths, guide to reinstall
  - Utente: changelog
    Assistente: created changelog page and styles
  </pre>
          <li>Logica di calcolo: probabilità di colpire (con gestione reroll), probabilità di ferire, probabilità di non salvezza, danno medio da espressione, stima dei danni attesi, stima dei modelli eliminati (no-overkill), e probabilità di eliminare tutta l'unità (Poisson approximation).</li>
        </ul>
      </section>
      <section>
        <h2>File chiave</h2>
        <ul>
          <li><code>index.html</code> — interfaccia e registrazione service worker</li>
          <li><code>assets/app.js</code> — motore di calcolo (parsing danno, probabilità, stime)</li>
          <li><code>assets/style.css</code> — stili responsive e checkbox personalizzate</li>
          <li><code>manifest.webmanifest</code> — metadata PWA</li>
          <li><code>service-worker.js</code> — caching e offline support</li>
        </ul>
      </section>
      <section>
        <h2>Note tecniche e decisioni</h2>
        <ul>
          <li>Ho preferito percorsi assoluti nel manifest e nell'HTML per evitare ambiguità sulla risoluzione degli URL quando il sito è servito da una sottocartella su GitHub Pages.</li>
          <li>La registrazione dinamica del service worker è stata mantenuta come fallback per ambienti locali, ma la versione pubblicata usa percorsi assoluti per coerenza.</li>
          <li>Il calcolatore usa valori medi per le espressioni di danno; non esegue simulazioni Monte Carlo, ma fornisce stime attese e una probabilità approssimata per il wipe totale.</li>
        </ul>
      </section>
      <section>
        <h2>Commit note</h2>
        <ul>
          <li>La cronologia dei commit segue conventional commits: <code>feat(...)</code>, <code>fix(...)</code>, <code>docs(...)</code>, <code>chore(...)</code>.</li>
          <li>Messaggi recenti: <em>fix(pwa): use absolute manifest and asset paths; register SW with absolute path for GitHub Pages</em>, <em>docs(pwa): add reinstall and troubleshooting guide for manifest/service worker</em>, <em>chore(site): apply manual edits to index.html (restore dynamic swPath)</em>.</li>
      </section>
    </article>
  </main>
  <footer>
    <p class="muted">Se vuoi, posso estendere questo diario con timestamp precisi per ogni commit e link ai rispettivi diff.</p>
  </footer>
</body>
</html>